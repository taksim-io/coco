(function(d,g){typeof exports=="object"&&typeof module<"u"?g(exports):typeof define=="function"&&define.amd?define(["exports"],g):(d=typeof globalThis<"u"?globalThis:d||self,g(d.coco={}))})(this,(function(d){"use strict";function g(s){return J(s)}function J(s){const t=s.match(/^hsla?\(\s*([-+]?[\d\.]+)(deg|rad|grad|turn)?\s*[,\s]\s*([-+]?[\d\.]+)%\s*[,\s]\s*([-+]?[\d\.]+)%\s*(?:[,\/]\s*([-+]?[\d\.]+)(%)?)?\s*\)$/i);if(!t)return;let a=parseFloat(t[1]);const n=t[2],e=parseFloat(t[3]),o=parseFloat(t[4]);let r=1;t[5]&&(r=parseFloat(t[5]),t[6]==="%"&&(r/=100)),n==="rad"?a=a*180/Math.PI:n==="grad"?a=a*.9:n==="turn"&&(a=a*360),a=a%360,a<0&&(a+=360);const c=s.match(/\.\d+/g)||[],h=c.length>0?Math.max(...c.map(i=>i.length-1)):0;return{space:"hsl",coords:[a,Math.min(100,Math.max(0,e)),Math.min(100,Math.max(0,o))],alpha:Math.min(1,Math.max(0,r)),meta:{precision:h}}}function T(s){const[t,a,n]=s.coords,e=s.alpha,o=s.meta?.precision??3,r=Math.pow(10,o),c=Math.round(t*r)/r,h=Math.round(a*r)/r,i=Math.round(n*r)/r,l=Math.round(e*1e3)/1e3;return l<1?`hsla(${c}, ${h}%, ${i}%, ${l})`:`hsl(${c}, ${h}%, ${i}%)`}function Q(s){const[t,a,n]=s.coords,e=s.alpha,o=(1-Math.abs(2*(n/100)-1))*(a/100),r=o*(1-Math.abs(t/60%2-1)),c=n/100-o/2;let h=0,i=0,l=0;return 0<=t&&t<60?(h=o,i=r,l=0):60<=t&&t<120?(h=r,i=o,l=0):120<=t&&t<180?(h=0,i=o,l=r):180<=t&&t<240?(h=0,i=r,l=o):240<=t&&t<300?(h=r,i=0,l=o):300<=t&&t<360&&(h=o,i=0,l=r),{space:"rgb",coords:[(h+c)*255,(i+c)*255,(l+c)*255],alpha:e}}function tt(s){let[t,a,n]=s.coords;t/=255,a/=255,n/=255;const e=Math.max(t,a,n),o=Math.min(t,a,n);let r=0,c=0;const h=(e+o)/2;if(e!==o){const i=e-o;switch(c=h>.5?i/(2-e-o):i/(e+o),e){case t:r=(a-n)/i+(a<n?6:0);break;case a:r=(n-t)/i+2;break;case n:r=(t-a)/i+4;break}r*=60}return{space:"hsl",coords:[r,c*100,h*100],alpha:s.alpha}}function st(s){const t=s.match(/^hsva?\(\s*([-+]?[\d\.]+)(deg|rad|grad|turn)?\s*[,\s]\s*([-+]?[\d\.]+)%?\s*[,\s]\s*([-+]?[\d\.]+)%?\s*(?:[,\/]\s*([-+]?[\d\.]+)(%)?)?\s*\)$/i);if(!t)return;let a=parseFloat(t[1]);const n=t[2],e=parseFloat(t[3]),o=parseFloat(t[4]);let r=1;t[5]&&(r=parseFloat(t[5]),t[6]==="%"&&(r/=100)),n==="rad"?a=a*180/Math.PI:n==="grad"?a=a*.9:n==="turn"&&(a=a*360),a=a%360,a<0&&(a+=360);const c=s.match(/\.\d+/g)||[],h=c.length>0?Math.max(...c.map(i=>i.length-1)):0;return{space:"hsv",coords:[a,Math.min(100,Math.max(0,e)),Math.min(100,Math.max(0,o))],alpha:Math.min(1,Math.max(0,r)),meta:{precision:h}}}function H(s){const[t,a,n]=s.coords,e=s.alpha,o=s.meta?.precision??3,r=Math.pow(10,o),c=Math.round(t*r)/r,h=Math.round(a*r)/r,i=Math.round(n*r)/r,l=Math.round(e*1e3)/1e3;return l<1?`hsva(${c}, ${h}%, ${i}%, ${l})`:`hsv(${c}, ${h}%, ${i}%)`}function at(s){const[t,a,n]=s.coords,e=s.alpha,o=a/100,r=n/100,c=r*o,h=c*(1-Math.abs(t/60%2-1)),i=r-c;let l=0,u=0,p=0;return 0<=t&&t<60?(l=c,u=h,p=0):60<=t&&t<120?(l=h,u=c,p=0):120<=t&&t<180?(l=0,u=c,p=h):180<=t&&t<240?(l=0,u=h,p=c):240<=t&&t<300?(l=h,u=0,p=c):300<=t&&t<360&&(l=c,u=0,p=h),{space:"rgb",coords:[(l+i)*255,(u+i)*255,(p+i)*255],alpha:e}}function nt(s){let[t,a,n]=s.coords;t/=255,a/=255,n/=255;const e=Math.max(t,a,n),o=Math.min(t,a,n);let r=0;const c=e-o,h=e===0?0:c/e,i=e;if(e!==o){switch(e){case t:r=(a-n)/c+(a<n?6:0);break;case a:r=(n-t)/c+2;break;case n:r=(t-a)/c+4;break}r*=60}else r=0;return{space:"hsv",coords:[r,h*100,i*100],alpha:s.alpha}}function f(s,t){return[s[0][0]*t[0]+s[0][1]*t[1]+s[0][2]*t[2],s[1][0]*t[0]+s[1][1]*t[1]+s[1][2]*t[2],s[2][0]*t[0]+s[2][1]*t[1]+s[2][2]*t[2]]}function k(s){return s.map(t=>{const a=t/255;return a<=.04045?a/12.92:Math.pow((a+.055)/1.055,2.4)})}function R(s){return s.map(t=>{const a=t>.0031308?1.055*Math.pow(t,.4166666666666667)-.055:12.92*t;return Math.round(Math.max(0,Math.min(1,a))*255)})}const W=[[.4122214708,.5363325363,.0514459929],[.2119034982,.6806995451,.1073969566],[.0883024619,.2817188376,.6299787005]],w=[[4.0767416621,-3.3077115913,.2309699292],[-1.2684380046,2.6097574011,-.3413193965],[-.0041960863,-.7034186147,1.707614701]],O=[[.2104542553,.793617785,-.0040720468],[1.9779984951,-2.428592205,.4505937099],[.0259040371,.7827717662,-.808675766]],A=[[.9999999985,.3963377774,.2158037573],[1.0000000089,-.1055613458,-.0638541728],[1.0000000547,-.0894841775,-1.291485548]],rt=[[.4124564,.3575761,.1804375],[.2126729,.7151522,.072175],[.0193339,.119192,.9503041]],et=[[3.2404542,-1.5371385,-.4985314],[-.969266,1.8760108,.041556],[.0556434,-.2040259,1.0572252]],ot=[[1.0478112,.0228866,-.050127],[.0295424,.9904844,-.0170491],[-.0092345,.0150436,.7521316]],ct=[[.9555766,-.0230393,.0631636],[-.0282895,1.0099416,.0210077],[.0122982,-.020483,1.3299098]],$=[.96422,1,.82521];function ht(s){return s.match(/^oklch\(\s*([-+]?[\d\.]+)%?\s+([-+]?[\d\.]+)(%?)\s+([-+]?[\d\.]+)(deg|rad|grad|turn)?\s*(?:\/\s*([-+]?[\d\.]+)%?)?\s*\)$/i),B(s)}function B(s){const t=s.match(/^oklch\(\s*([^\s\/,]+)[\s,]+([^\s\/,]+)[\s,]+([^\s\/,]+)(?:[\s\/,]+([^\s\)]+))?\s*\)$/i);if(!t)return;let a=parseFloat(t[1]);t[1].endsWith("%")&&(a/=100);let n=parseFloat(t[2]);t[2].endsWith("%")&&(n=n/100*.4);let e=parseFloat(t[3]);t[3].endsWith("rad")?e=e*180/Math.PI:t[3].endsWith("grad")?e=e*.9:t[3].endsWith("turn")&&(e=e*360),e=e%360,e<0&&(e+=360);const o=t[4];let r=1;return o&&(r=parseFloat(o),o.endsWith("%")&&(r/=100)),{space:"oklch",coords:[a,n,e],alpha:Math.min(1,Math.max(0,r)),meta:{precision:(s.match(/\.\d+/g)||[]).length>0?Math.max(...(s.match(/\.\d+/g)||[]).map(c=>c.length-1)):0}}}function C(s){const[t,a,n]=s.coords,e=s.meta?.precision??3,o=Math.pow(10,e),r=Math.round(t*o)/o,c=Math.round(a*o)/o,h=Math.round(n*o)/o,i=Math.round(s.alpha*1e3)/1e3;return i<1?`oklch(${r} ${c} ${h} / ${i})`:`oklch(${r} ${c} ${h})`}function it(s){const[t,a,n]=s.coords,e=s.alpha,o=n*Math.PI/180,r=t,c=a*Math.cos(o),h=a*Math.sin(o),l=f(A,[r,c,h]).map(x=>x*x*x),u=f(w,l);return{space:"rgb",coords:R(u),alpha:e}}function lt(s){const[t,a,n]=s.coords,e=k([t,a,n]),r=f(W,e).map(p=>Math.cbrt(p)),[c,h,i]=f(O,r),l=Math.sqrt(h*h+i*i);let u;return l<1e-4?u=0:(u=Math.atan2(i,h)*(180/Math.PI),u<0&&(u+=360)),{space:"oklch",coords:[c,l,u],alpha:s.alpha}}function ut(s){const t=s.match(/^color\(xyz\s+([-+]?[\d\.]+)\s+([-+]?[\d\.]+)\s+([-+]?[\d\.]+)(?:\s*\/\s*([-+]?[\d\.]+)%?)?\)$/i);if(!t)return;const[a,n,e,o,r]=t;return{space:"xyz",coords:[parseFloat(n),parseFloat(e),parseFloat(o)],alpha:r?parseFloat(r):1,meta:{precision:(s.match(/\.\d+/g)||[]).length>0?Math.max(...(s.match(/\.\d+/g)||[]).map(c=>c.length-1)):0}}}function P(s){const t=s.meta?.precision??4,a=Math.pow(10,t),[n,e,o]=s.coords.map(c=>Math.round(c*a)/a),r=Math.round(s.alpha*1e3)/1e3;return r<1?`color(xyz ${n} ${e} ${o} / ${r})`:`color(xyz ${n} ${e} ${o})`}function D(s){const t=s.coords,a=f(et,t);return{space:"rgb",coords:R(a),alpha:s.alpha}}function G(s){const t=k(s.coords);return{space:"xyz",coords:f(rt,t),alpha:s.alpha}}const _=216/24389,z=24389/27;function dt(s){const t=s.match(/^lab\(\s*([-+]?[\d\.]+)%?\s+([-+]?[\d\.]+)\s+([-+]?[\d\.]+)(?:\s*\/\s*([-+]?[\d\.]+)%?)?\)$/i);if(!t)return;const[a,n,e,o,r]=t;return{space:"lab",coords:[parseFloat(n),parseFloat(e),parseFloat(o)],alpha:r?parseFloat(r):1,meta:{precision:(s.match(/\.\d+/g)||[]).length>0?Math.max(...(s.match(/\.\d+/g)||[]).map(c=>c.length-1)):0}}}function X(s){const t=s.meta?.precision??3,a=Math.pow(10,t),[n,e,o]=s.coords.map(c=>Math.round(c*a)/a),r=Math.round(s.alpha*1e3)/1e3;return r<1?`lab(${n} ${e} ${o} / ${r})`:`lab(${n} ${e} ${o})`}function ft(s){const[t,a,n]=s,e=t/$[0],o=a/$[1],r=n/$[2],c=F=>F>_?Math.cbrt(F):(z*F+16)/116,h=c(e),i=c(o),l=c(r),u=116*i-16,p=500*(h-i),x=200*(i-l);return[u,p,x]}function pt(s){const[t,a,n]=s,e=(t+16)/116,o=a/500+e,r=e-n/200,c=u=>u*u*u>_?u*u*u:(116*u-16)/z,h=c(o),i=t>z*_?Math.pow((t+16)/116,3):t/z,l=c(r);return[h*$[0],i*$[1],l*$[2]]}function j(s){const t=s.coords,a=pt(t),n=f(ct,a);return D({coords:n,alpha:s.alpha})}function K(s){const a=G(s).coords,n=f(ot,a);return{space:"lab",coords:ft(n),alpha:s.alpha}}function bt(s){const t=s.match(/^lch\(\s*([-+]?[\d\.]+)%?\s+([-+]?[\d\.]+)\s+([-+]?[\d\.]+)(deg|rad|grad|turn)?\s*(?:\/\s*([-+]?[\d\.]+)%?)?\s*\)$/i);if(!t)return;const[a,n,e,o,r,c]=t;let h=parseFloat(o);return r==="rad"?h=h*180/Math.PI:r==="grad"?h=h*.9:r==="turn"&&(h=h*360),h=h%360,h<0&&(h+=360),{space:"lch",coords:[parseFloat(n),parseFloat(e),h],alpha:c?parseFloat(c):1,meta:{precision:(s.match(/\.\d+/g)||[]).length>0?Math.max(...(s.match(/\.\d+/g)||[]).map(i=>i.length-1)):0}}}function S(s){const t=s.meta?.precision??3,a=Math.pow(10,t),[n,e,o]=s.coords,r=Math.round(n*a)/a,c=Math.round(e*a)/a,h=Math.round(o*a)/a,i=Math.round(s.alpha*1e3)/1e3;return i<1?`lch(${r} ${c} ${h} / ${i})`:`lch(${r} ${c} ${h})`}function Mt(s){const[t,a,n]=s.coords,e=n*Math.PI/180,o=a*Math.cos(e),r=a*Math.sin(e);return j({coords:[t,o,r],alpha:s.alpha})}function mt(s){const t=K(s),[a,n,e]=t.coords,o=Math.sqrt(n*n+e*e);let r;return o<1e-4?r=0:(r=Math.atan2(e,n)*180/Math.PI,r<0&&(r+=360)),{space:"lch",coords:[a,o,r],alpha:s.alpha}}function $t(s){const t=s.match(/^oklab\(\s*([-+]?[\d\.]+)%?\s+([-+]?[\d\.]+)\s+([-+]?[\d\.]+)(?:\s*\/\s*([-+]?[\d\.]+)%?)?\s*\)$/i);if(!t)return;const[a,n,e,o,r]=t;let c=parseFloat(n);return t[1].endsWith("%")&&(c/=100),{space:"oklab",coords:[c,parseFloat(e),parseFloat(o)],alpha:r?parseFloat(r):1,meta:{precision:(s.match(/\.\d+/g)||[]).length>0?Math.max(...(s.match(/\.\d+/g)||[]).map(h=>h.length-1)):0}}}function E(s){const t=s.meta?.precision??3,a=Math.pow(10,t),[n,e,o]=s.coords,r=Math.round(n*a)/a,c=Math.round(e*a)/a,h=Math.round(o*a)/a,i=Math.round(s.alpha*1e3)/1e3;return i<1?`oklab(${r} ${c} ${h} / ${i})`:`oklab(${r} ${c} ${h})`}function gt(s){const[t,a,n]=s.coords,e=s.alpha,r=f(A,[t,a,n]).map(i=>i*i*i),c=f(w,r);return{space:"rgb",coords:R(c),alpha:e}}function xt(s){const[t,a,n]=s.coords,e=k([t,a,n]),r=f(W,e).map(h=>Math.cbrt(h));return{space:"oklab",coords:f(O,r),alpha:s.alpha}}function v(s){if(s.startsWith("#")){const t=s.slice(1);if(t.match(/^[0-9a-f]{3}$/i))return{space:"rgb",coords:[parseInt(t[0]+t[0],16),parseInt(t[1]+t[1],16),parseInt(t[2]+t[2],16)],alpha:1};if(t.match(/^[0-9a-f]{4}$/i))return{space:"rgb",coords:[parseInt(t[0]+t[0],16),parseInt(t[1]+t[1],16),parseInt(t[2]+t[2],16)],alpha:parseInt(t[3]+t[3],16)/255};if(t.match(/^[0-9a-f]{6}$/i))return{space:"rgb",coords:[parseInt(t.slice(0,2),16),parseInt(t.slice(2,4),16),parseInt(t.slice(4,6),16)],alpha:1};if(t.match(/^[0-9a-f]{8}$/i))return{space:"rgb",coords:[parseInt(t.slice(0,2),16),parseInt(t.slice(2,4),16),parseInt(t.slice(4,6),16)],alpha:parseInt(t.slice(6,8),16)/255}}}function U(s){const{coords:t,alpha:a}=s,[n,e,o]=t.map(h=>Math.round(Math.max(0,Math.min(255,h)))),r=h=>h.toString(16).padStart(2,"0"),c=Math.round(Math.max(0,Math.min(1,a))*255);return`#${r(n)}${r(e)}${r(o)}${r(c)}`}function V(s){const{coords:t}=s,[a,n,e]=t.map(r=>Math.round(Math.max(0,Math.min(255,r)))),o=r=>r.toString(16).padStart(2,"0");return`#${o(a)}${o(n)}${o(e)}`}function zt(s){const t=U(s);return t[1]===t[2]&&t[3]===t[4]&&t[5]===t[6]&&t[7]===t[8]?`#${t[1]}${t[3]}${t[5]}${t[7]}`:t}function yt(s){const t=V(s);return t[1]===t[2]&&t[3]===t[4]&&t[5]===t[6]?`#${t[1]}${t[3]}${t[5]}`:t}function I(s){return kt(s)}function kt(s){const{coords:t,alpha:a}=s,[n,e,o]=t.map(c=>Math.round(Math.max(0,Math.min(255,c)))),r=c=>c.toString(16).padStart(2,"0");if(a<1){const c=Math.round(Math.max(0,Math.min(1,a))*255);return`#${r(n)}${r(e)}${r(o)}${r(c)}`}return`#${r(n)}${r(e)}${r(o)}`}function Rt(s){const t=s.match(/^rgba?\(\s*([-+]?[\d\.]+)(%?)\s*,\s*([-+]?[\d\.]+)(%?)\s*,\s*([-+]?[\d\.]+)(%?)\s*(?:,\s*([-+]?[\d\.]+)(\%?))?\s*\)$/i);if(!t){const a=s.match(/^rgba?\(\s*([-+]?[\d\.]+)(%?)\s+([-+]?[\d\.]+)(%?)\s+([-+]?[\d\.]+)(%?)\s*(?:\/\s*([-+]?[\d\.]+)(\%?))?\s*\)$/i);return a?q(a):void 0}return q(t)}function q(s){const t=y(s[1],s[2],255),a=y(s[3],s[4],255),n=y(s[5],s[6],255),e=s[7]?y(s[7],s[8],1):1;return{space:"rgb",coords:[t,a,n],alpha:e}}function y(s,t,a){let n=parseFloat(s);return t==="%"&&(n=n/100*a),Math.min(Math.max(n,0),a)}function N(s){const{coords:t,alpha:a}=s,[n,e,o]=t.map(c=>Math.round(c)),r=Math.round(a*1e3)/1e3;return r<1?`rgba(${n}, ${e}, ${o}, ${r})`:`rgb(${n}, ${e}, ${o})`}function m(s,t){if(s.space===t)return s;const a=_t(s);if(t==="rgb")return a;if(t==="hsl")return tt(a);if(t==="hsv")return nt(a);if(t==="oklch")return lt(a);if(t==="xyz")return G(a);if(t==="lab")return K(a);if(t==="lch")return mt(a);if(t==="oklab")return xt(a);if(t.startsWith("hex"))return a;throw new Error(`Unsupported target space: ${t}`)}function _t(s){if(s.space==="rgb")return s;if(s.space==="hsl")return Q(s);if(s.space==="hsv")return at(s);if(s.space==="oklch")return it(s);if(s.space==="xyz")return D(s);if(s.space==="lab")return j(s);if(s.space==="lch")return Mt(s);if(s.space==="oklab")return gt(s);if(s.space.startsWith("hex"))return{...s,space:"rgb"};throw new Error(`Unsupported source space: ${s.space}`)}function M(s,{namedColors:t,nameResolver:a}={}){if(!s)return;if(s=s.trim(),a){const e=a(s);if(e)return v("#"+e.replace("#",""))}if(t){const e=t[s];if(e)return v("#"+e.replace("#",""))}if(s.startsWith("#"))return v(s);const n=s.toLowerCase();if(n.startsWith("rgb"))return Rt(s);if(n.startsWith("hsl"))return g(s);if(n.startsWith("hsv"))return st(s);if(n.startsWith("oklch"))return ht(s);if(n.startsWith("color(xyz"))return ut(s);if(n.startsWith("lab"))return dt(s);if(n.startsWith("lch"))return bt(s);if(n.startsWith("oklab"))return $t(s)}function L(s,t){return t==="hex"?I(s):t==="hex3"?yt(s):t==="hex4"?zt(s):t==="hex6"?V(s):t==="hex8"?U(s):t==="rgb"?N(s):t==="hsl"?T(s):t==="hsv"?H(s):t==="oklch"?C(s):t==="xyz"?P(s):t==="lab"?X(s):t==="lch"?S(s):t==="oklab"?E(s):I(s)}function vt(s){return I(m({space:"hsl",coords:[b(s),100,50],alpha:1},"rgb"))}function It(s){const t=m({space:"hsl",coords:[b(s),100,50],alpha:1},"rgb");return N(t)}function Lt(s){return T({coords:[b(s),100,50],alpha:1})}function Ft(s){return H({coords:[b(s),100,100],alpha:1})}function Tt(s){return C({coords:[.7,.2,b(s)],alpha:1})}function Ht(s){const t=m({space:"hsl",coords:[b(s),100,50],alpha:1},"xyz");return P(t)}function Wt(s){const n=b(s)*Math.PI/180;return X({coords:[53,104*Math.cos(n),104*Math.sin(n)],alpha:1})}function wt(s){return S({coords:[53,104,b(s)],alpha:1})}function Ot(s){const n=b(s)*Math.PI/180;return E({coords:[.7,.2*Math.cos(n),.2*Math.sin(n)],alpha:1})}function b(s){return(s%360+360)%360}function Y(s={}){const a=(n,e)=>{const o=M(n,s);if(o)return e=e??"hex",L(m(o,e),e)};return a.isColor=n=>!!M(n,s),a.getType=n=>{if(s.nameResolver?.(n)||s.namedColors?.[n])return"x11";const e=M(n,s);return e?n.startsWith("#")?"hex":e.space:void 0},a.getAlpha=n=>{const e=M(n,s)?.alpha??1;return Math.round(e*1e3)/1e3},a.setAlpha=(n,e)=>{const o=M(n,s);if(!o)return;o.alpha=Math.min(1,Math.max(0,e));const r=n.startsWith("#")?"hex":o.space;return L(o,r)},a.removeAlpha=n=>a.setAlpha(n,1),a.isEqual=(n,e)=>{if(n===e)return!0;if(!n||!e)return!1;const o=M(n,s),r=M(e,s);if(!o||!r)return!1;const c=m(o,"rgb"),h=m(r,"rgb"),i=.5;return Math.abs(c.coords[0]-h.coords[0])<i&&Math.abs(c.coords[1]-h.coords[1])<i&&Math.abs(c.coords[2]-h.coords[2])<i&&Math.abs(c.alpha-h.alpha)<.01},a}const Z={};Object.entries(Z).reduce((s,[t,a])=>(s[a]=t,s),{});const At=Y();d.coco=At,d.convert=m,d.createCoco=Y,d.hue2hex=vt,d.hue2hsl=Lt,d.hue2hsv=Ft,d.hue2lab=Wt,d.hue2lch=wt,d.hue2oklab=Ot,d.hue2oklch=Tt,d.hue2rgb=It,d.hue2xyz=Ht,d.namedColors=Z,d.parse=M,d.serialize=L,Object.defineProperty(d,Symbol.toStringTag,{value:"Module"})}));
